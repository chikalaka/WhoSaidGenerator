{"version":3,"sources":["../../../client/components/auth/interceptor.service.js"],"names":[],"mappings":"AAAA;;AAEA,CAAC,YAAW;;AAEV,WAAS,eAAT,CAAyB,UAAzB,EAAqC,EAArC,EAAyC,QAAzC,EAAmD,SAAnD,EAA8D,IAA9D,EAAoE;AAClE,QAAI,KAAJ;AACA,WAAO;;;AAEL,aAFK,mBAEG,MAFH,EAEW;AACd,eAAO,OAAP,GAAiB,OAAO,OAAP,IAAkB,EAAnC;AACA,YAAI,SAAS,GAAT,CAAa,OAAb,KAAyB,KAAK,YAAL,CAAkB,OAAO,GAAzB,CAA7B,EAA4D;AAC1D,iBAAO,OAAP,CAAe,aAAf,GAA+B,YAAY,SAAS,GAAT,CAAa,OAAb,CAA3C;AACD;AACD,eAAO,MAAP;AACD,OARI;;;;AAWL,mBAXK,yBAWS,QAXT,EAWmB;AACtB,YAAI,SAAS,MAAT,KAAoB,GAAxB,EAA6B;AAC3B,WAAC,UAAU,QAAQ,UAAU,GAAV,CAAc,QAAd,CAAlB,CAAD,EACC,EADD,CACI,OADJ;;AAGA,mBAAS,MAAT,CAAgB,OAAhB;AACD;AACD,eAAO,GAAG,MAAH,CAAU,QAAV,CAAP;AACD;AAnBI,KAAP;AAqBD;;AAED,UAAQ,MAAR,CAAe,iBAAf,EACG,OADH,CACW,iBADX,EAC8B,eAD9B;AAED,CA7BD","file":"interceptor.service.js","sourcesContent":["'use strict';\r\n\r\n(function() {\r\n\r\n  function authInterceptor($rootScope, $q, $cookies, $injector, Util) {\r\n    var state;\r\n    return {\r\n      // Add authorization token to headers\r\n      request(config) {\r\n        config.headers = config.headers || {};\r\n        if ($cookies.get('token') && Util.isSameOrigin(config.url)) {\r\n          config.headers.Authorization = 'Bearer ' + $cookies.get('token');\r\n        }\r\n        return config;\r\n      },\r\n\r\n      // Intercept 401s and redirect you to login\r\n      responseError(response) {\r\n        if (response.status === 401) {\r\n          (state || (state = $injector.get('$state')))\r\n          .go('login');\r\n          // remove any stale tokens\r\n          $cookies.remove('token');\r\n        }\r\n        return $q.reject(response);\r\n      }\r\n    };\r\n  }\r\n\r\n  angular.module('whoSaidApp.auth')\r\n    .factory('authInterceptor', authInterceptor);\r\n})();\r\n"]}