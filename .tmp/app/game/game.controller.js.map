{"version":3,"sources":["../../../client/app/game/game.controller.js"],"names":[],"mappings":"AAAA;;AAEA,QAAQ,MAAR,CAAe,YAAf,EAEK,UAFL,CAEgB,gBAFhB,EAEkC,UAAU,MAAV,EAAkB,KAAlB,EAAyB,IAAzB,EAA+B;AAC7D,WAAO,MAAP,GAAgB,YAAhB;AACA,WAAO,OAAP,GAAiB,KAAK,OAAtB;AACA,WAAO,WAAP,GAAqB,KAAK,cAAL,EAArB;AACA,WAAO,WAAP,GAAqB,OAArB;AACA,WAAO,aAAP,GAAuB,KAAK,cAAL,GAAsB,MAA7C;;;;;AAKA,UAAM,GAAN,CAAU,kBAAV,EACK,OADL,CACa,UAAS,IAAT,EAAe;AACxB,eAAO,KAAP,GAAe,IAAf;AACH,KAHD,EAIK,KAJL,CAIW,UAAS,GAAT,EAAc;AACrB,cAAM,mCAAN;AACH,KAND;;AAQA,QAAI,MAAM,OAAO,aAAP,CAAqB,MAA/B;;AAEA,aAAS,aAAT,CAAuB,IAAvB,EAA6B;AACzB,YAAI,MAAM,EAAV;;AAEA,aAAK,IAAI,IAAE,CAAX,EAAa,IAAE,IAAf,EAAoB,GAApB,EAAyB;AACrB,gBAAI,CAAJ,IAAS,EAAT;AACH;;AAED,eAAO,GAAP;AACH;;AAED,WAAO,WAAP,GAAqB,cAAc,GAAd,CAArB;AACA,WAAO,YAAP,GAAsB,cAAc,GAAd,CAAtB;;;;AAIA,WAAO,YAAP,GAAsB,YAAU;AAC5B,gBAAQ,GAAR,CAAY,OAAZ;;AAEA,eAAO,SAAP,GAAmB,IAAI,MAAJ,CAAW;AAC9B,oBAAQ,KAAK,cAAL,GAAsB,GADA;AAE9B,sBAAU,OAAO,QAFa;AAG9B,qBAAS,OAAO,iBAHc;AAI9B,kBAAK,OAAO;AAJkB,SAAX,CAAnB;AAMA,gBAAQ,GAAR,CAAY,OAAO,SAAnB;;;;;;;;;;;;;;;;;AAiBI,cAAM,GAAN,CAAU,iBAAiB,OAAO,eAAlC,EAEK,OAFL,CAEa,UAAS,IAAT,EAAe;AACxB,gBAAI,QAAQ,IAAZ;;AAEA,oBAAQ,GAAR,CAAY,KAAZ;;AAEA,kBAAM,GAAN,CAAU,iBAAiB,MAAM,GAAjC,EAAsC,OAAO,SAA7C,EACK,OADL,CACa,YAAU;AACnB,wBAAQ,GAAR,CAAY,mBAAZ;AACH,aAHD,EAIK,KAJL,CAIW,UAAS,GAAT,EAAa;AACpB,sBAAM,mCAAN;AACH,aAND;AAOH,SAdD,EAeK,KAfL,CAeW,UAAS,GAAT,EAAc;AACrB,kBAAM,gDAAN;AACH,SAjBD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DP,KAvFD;;;;;;;;;;;;;AAoGC,WAAO,aAAP,GAAuB,UAAS,KAAT,EAAgB,MAAhB,EAAwB,MAAxB,EAAgC,MAAhC,EAAuC;AAC3D,gBAAQ;AACJ,mBAAO,eAAP,GAAyB,MAAM,GAA/B;AAEH;AACJ,KALA;AAMK,WAAO,WAAP,GAAqB,UAAS,KAAT,EAAgB,MAAhB,EAAwB,MAAxB,EAAgC,MAAhC,EAAuC;AAC9D,gBAAQ;AACJ,mBAAO,iBAAP,GAA2B,MAAM,GAAjC;AAEH;AACJ,KALK;AAMA,WAAO,YAAP,GAAsB,UAAS,KAAT,EAAgB,MAAhB,EAAwB,MAAxB,EAAgC,MAAhC,EAAuC;AAC/D,gBAAQ;AACJ,mBAAO,kBAAP,GAA4B,MAAM,GAAlC;AAEH;AACJ,KALK;;;AASN,WAAO,KAAP,GAAe,UAAS,WAAT,EAAsB,KAAtB,EAA6B;;AAExC,eAAO,WAAP,CAAmB,WAAnB,EAAgC,KAAhC,IAAyC,EAAzC;AACA,eAAO,YAAP,CAAoB,WAApB,EAAiC,KAAjC,IAA0C,EAA1C;;;;;;;;;;AAUH,KAbD;AAeH,CA7KD","file":"game.controller.js","sourcesContent":["'use strict';\r\n\r\nangular.module('whoSaidApp')\r\n\r\n    .controller('GameController', function ($scope, $http, Auth) {\r\n    $scope.header = 'Who Said ?';\r\n    $scope.isAdmin = Auth.isAdmin;\r\n    $scope.currentUser = Auth.getCurrentUser();\r\n    $scope.isCollapsed = 'false';\r\n    $scope.currentGroups = Auth.getCurrentUser().groups;\r\n    /*$scope.groupSelected;\r\n    $scope.selectedWhoPost;\r\n    $scope.selectedWhomPost;*/\r\n\r\n    $http.get('/api/users/12345')\r\n        .success(function(data) {\r\n        $scope.users = data;\r\n    })\r\n        .error(function(err) {\r\n        alert('Error! Something went wrong - get');\r\n    })\r\n    \r\n    var len = $scope.currentGroups.length;\r\n\r\n    function Create2DArray(rows) {\r\n        var arr = [];\r\n\r\n        for (var i=0;i<rows;i++) {\r\n            arr[i] = [];\r\n        }\r\n\r\n        return arr;\r\n    }\r\n\r\n    $scope.selectedWho = Create2DArray(len);\r\n    $scope.selectedWhom = Create2DArray(len);\r\n    \r\n    //post a new sentence\r\n    \r\n    $scope.postSentence = function(){\r\n        console.log(\"hello\");\r\n        //create a new phrase object - get id\r\n        $scope.newPhrase = new Object({\r\n        author: Auth.getCurrentUser()._id,\r\n        sentence: $scope.sentence,\r\n        oneSaid: $scope.selectedWhoPostid,\r\n        said:$scope.selectedWhomPostid\r\n    });\r\n        console.log($scope.newPhrase);\r\n        \r\n        /*\r\n        $scope.newPhrase= {};\r\n        $scope.newPhrase.author= Auth.getCurrentUser;\r\n        $scope.newPhrase.sentence= $scope.sentence;\r\n        //$scope.newPhrase.group=$scope.groupSelected;\r\n        $scope.newPhrase.oneSaid=$scope.selectedWhoPostid;\r\n        $scope.newPhrase.Said=$scope.selectedWhomPostid;\r\n        /*\r\n        //var parameter = JSON.stringify($scope.newGroup);\r\n        //hello test\r\n       /*\r\n        $http.post('/api/groups:id', $scope.newPhrase)\r\n            .success(function(createdPhrase){\r\n*/\r\n            // add phrase to current group\r\n            $http.get('/api/groups/' + $scope.groupSelectedId)\r\n            \r\n                .success(function(data) {\r\n                var group = data;\r\n                //group.phrases.push($scope.newPhrase);\r\n                console.log(group);\r\n                \r\n                $http.put('/api/groups/' + group._id, $scope.newPhrase)\r\n                    .success(function(){\r\n                    console.log(\"sucess put phrase\")\r\n                })\r\n                    .error(function(err){\r\n                    alert('Error! Something went wrong - put');\r\n                });\r\n            })\r\n                .error(function(err) {\r\n                alert('Error! Something went wrong - get users groups');\r\n            })\r\n\r\n                \r\n                \r\n                \r\n                \r\n                \r\n                \r\n                \r\n                \r\n            // add group to all users selected\r\n            /*\r\n            var len = $scope.newGroup.users.length;\r\n\r\n            function myFunction(i){\r\n                $http.get('/api/users/12345/' + $scope.newGroup.users[i])\r\n                    .success(function(data) {\r\n\r\n                    var groups = data;\r\n                    groups.groups.push(createdGroup._id);\r\n\r\n                    $http.put('/api/users/12345/' + $scope.newGroup.users[i], groups)\r\n                        .success(function(){\r\n                    })\r\n                        .error(function(err){\r\n                        alert('Error! Something went wrong - put');\r\n                    });\r\n                })\r\n                    .error(function(err) {\r\n                    alert('Error! Something went wrong - get users groups');\r\n                })\r\n            }\r\n\r\n            for(var i=0;i<len;i++){\r\n\r\n                myFunction(i);\r\n            }\r\n            */\r\n/*\r\n        })\r\n            .error(function(err){\r\n            alert('Error! Something went wrong - post');\r\n        });\r\n        */\r\n    }\r\n    //end of sentence\r\n\r\n    //$scope.selectedUsersNames = [];\r\n/*\r\n    $scope.newPhrase = new Object({\r\n        name: '',\r\n        users: []\r\n    });\r\n    */\r\n    \r\n   // -------------//\r\n    //save the chosen id in $scope.XXXXId\r\n     $scope.onSelectGroup = function($item, $model, $label, $event){\r\n        $event: {\r\n            $scope.groupSelectedId = $item._id;\r\n           \r\n        }\r\n    }\r\n          $scope.onSelectWho = function($item, $model, $label, $event){\r\n        $event: {\r\n            $scope.selectedWhoPostid = $item._id;\r\n           \r\n        }\r\n    }\r\n          $scope.onSelectWhom = function($item, $model, $label, $event){\r\n        $event: {\r\n            $scope.selectedWhomPostid = $item._id;\r\n           \r\n        }\r\n    }\r\n   // -------------//\r\n          \r\n          \r\n    $scope.guess = function(parentIndex, index) {\r\n        \r\n        $scope.selectedWho[parentIndex][index] = \"\";\r\n        $scope.selectedWhom[parentIndex][index] = \"\";\r\n        \r\n        //parentIndex - integer indicate which group the user chose in the array: $scope.currentGroups\r\n        //index - integer indicate which group the user chose in the array: $scope.currentGroups[parentIndex] (inside this array there are phrases)\r\n        \r\n        //Doron - here you need to add the code for:\r\n        //popup\r\n        //check if user guessed right\r\n        //update his score if needed\r\n        //and so on\r\n    };\r\n\r\n});"]}