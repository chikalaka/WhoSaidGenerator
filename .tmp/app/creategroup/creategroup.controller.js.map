{"version":3,"sources":["../../../client/app/creategroup/creategroup.controller.js"],"names":[],"mappings":"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","file":"creategroup.controller.js","sourcesContent":["'use strict';\r\n\r\nangular.module('whoSaidApp')\r\n\r\n    .controller('CreateGroupController', function ($scope, $http, Auth/*, User*/) {\r\n    $scope.header = 'Create Group';\r\n    $scope.isAdmin = Auth.isAdmin;\r\n\r\n    $http.get('/api/users/12345')\r\n        .success(function(data) {\r\n        $scope.users = data;\r\n\r\n        for(var i=0;i<$scope.users.length;i++){\r\n            if($scope.users[i]._id == Auth.getCurrentUser()._id){\r\n                $scope.users.splice(i, 1);\r\n            }\r\n        }\r\n    })\r\n        .error(function(err) {\r\n        alert('Error! Something went wrong - get');\r\n    })\r\n\r\n    $scope.selected = \"\";\r\n\r\n    $scope.getfocus = function() {\r\n        document.getElementById(\"searchUser\").focus();\r\n    }\r\n\r\n    $scope.postNewGroup = function(){\r\n\r\n        //var parameter = JSON.stringify($scope.newGroup);\r\n\r\n        $http.post('/api/groups', $scope.newGroup)\r\n            .success(function(createdGroup){\r\n\r\n            // add group to current user\r\n            $http.get('/api/users/12345/' + Auth.getCurrentUser()._id)\r\n                .success(function(data) {\r\n\r\n                var groups = data;\r\n                groups.groups.push(createdGroup._id);\r\n\r\n                $http.put('/api/users/12345/' + Auth.getCurrentUser()._id, groups)\r\n                    .success(function(){\r\n                })\r\n                    .error(function(err){\r\n                    alert('Error! Something went wrong - put');\r\n                });\r\n            })\r\n                .error(function(err) {\r\n                alert('Error! Something went wrong - get users groups');\r\n            })\r\n\r\n            // add group to all users selected\r\n            var len = $scope.newGroup.users.length;\r\n\r\n            function myFunction(i){\r\n                $http.get('/api/users/12345/' + $scope.newGroup.users[i])\r\n                    .success(function(data) {\r\n\r\n                    var groups = data;\r\n                    groups.groups.push(createdGroup._id);\r\n\r\n                    $http.put('/api/users/12345/' + $scope.newGroup.users[i], groups)\r\n                        .success(function(){\r\n                    })\r\n                        .error(function(err){\r\n                        alert('Error! Something went wrong - put');\r\n                    });\r\n                })\r\n                    .error(function(err) {\r\n                    alert('Error! Something went wrong - get users groups');\r\n                })\r\n            }\r\n\r\n            for(var i=0;i<len;i++){\r\n\r\n                myFunction(i);\r\n            }\r\n\r\n        })\r\n            .error(function(err){\r\n            alert('Error! Something went wrong - post');\r\n        });\r\n    }\r\n\r\n    $scope.selectedUsersNames = [];\r\n\r\n    $scope.newGroup = new Object({\r\n        name: '',\r\n        users: []\r\n    });\r\n\r\n    // to add current user\r\n    $scope.newGroup.users.push(Auth.getCurrentUser()._id);\r\n\r\n    $scope.onSelectPart = function($item, $model, $label, $event){\r\n        $event: {\r\n            $scope.selectedUsersNames.push($label);\r\n            $scope.newGroup.users.push($item._id);\r\n\r\n            $scope.selected = \"\";\r\n\r\n            for(var i=0;i<$scope.users.length;i++){\r\n                if($scope.users[i]._id == $item._id){\r\n                    $scope.users.splice(i, 1);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n});"]}